extends ../layout.pug

block head
	title My Permisions

block content
	.board-header
		h1.board-title My Permissions
	br
	hr(size=1)
	h4.no-m-p Board-specific permissions
	if user.ownedBoards && user.ownedBoards.length > 0 || user.staffBoards && user.staffBoards.length > 0
		ul
			for b in user.ownedBoards
				li
					a(href=`/${b}/manage/mypermissions.html`) /#{b}/
			for b in user.staffBoards
				li
					a(href=`/${b}/manage/mypermissions.html`) /#{b}/
	else
		p None
	hr(size=1)
	h4.mv-5 Account permissions
		|
		if permissions.get(Permissions.MANAGE_GLOBAL_ACCOUNTS)
			|  
			a(href=`/globalmanage/editaccount/${user.username}.html`) [Edit]
	- const jsonPermissions = permissions.toJSON();
	for perm, index in Object.keys(jsonPermissions)
		if jsonPermissions[perm].title && index > 0
			hr(size=1)
			h4.mv-5 #{jsonPermissions[perm].title}
		.row
			label.postform-style.ph-5
				input(type='checkbox' checked=jsonPermissions[perm].state disabled)
			.rlabel #{jsonPermissions[perm].label}
			p #{jsonPermissions[perm].desc}
