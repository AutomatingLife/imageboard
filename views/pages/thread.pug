extends ../layout.pug
include ../mixins/post.pug
include ../mixins/boardnav.pug
include ../mixins/boardheader.pug

block head
	script(src='/js/all.js')
	title /#{board._id}/ - #{thread.subject||thread.postId}
	meta(property='og:site_name', value=meta.siteName)
	meta(property='og:title', content=thread.subject)
	meta(property='og:url', content=meta.url)
	meta(property='og:description', content=thread.message)
	if thread.files.length > 0
		if thread.spoiler
			meta(property='og:image', content='/img/spoiler.png')
		else if thread.files[0].hasThumb === true
			meta(property='og:image', content=`/img/thumb-${thread.files[0].hash}${thread.files[0].thumbextension}`)
		else
			meta(property='og:image', content=`/img/${thread.files[0].filename}`)

block content
	+boardheader()
	br
	include ../includes/postform.pug
	br
	include ../includes/announcements.pug
	include ../includes/stickynav.pug
	nav.pages
		+boardnav(null, true, true)
	form(action=`/forms/board/${board._id}/actions` method='POST' enctype='application/x-www-form-urlencoded')
		hr(size=1)
		section.thread
			+post(thread)
			for post in thread.replies
				+post(post)
		hr(size=1)
		div.jsonly.live#livetext
			.dot#livecolor
			| Connecting...
		nav.pages
			+boardnav(null, true, true)
		include ../includes/actionfooter.pug
