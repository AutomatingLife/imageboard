mixin post(board, post, truncate)
	article(id=post.postId class='post-container '+(post.thread ? '' : 'op'))
		header.post-info
			input.post-check(type='checkbox', name='checked[]' value=post.postId)
			if post.subject
				span.post-subject #{post.subject}
			span.post-name #{post.name}
			span #{post.date.toLocaleString()}
			span.user-id(style=`background: #${post.userId}`) #{post.userId}
			span: a(href=`/${board._id}/thread/${post.thread ? post.thread : post.postId}#${post.postId}`) ##{post.postId}
		if post.files.length > 0
			.post-files
				each file in post.files
					.post-file
						.post-file-info
							span: a(href='/img/'+file.filename download=file.originalFilename) #{file.originalFilename}
							br
							span (#{file.sizeString} #{file.geometryString})
						.post-file-src
							a(target='_blank' href='/img/'+file.filename)
								object(data=`/img/thumb-${file.filename.split('.')[0]}.png` width='128' height='128')
		if post.message
			if truncate
				-
					const splitPost = post.message.split('\n');
					const messageLines = splitPost.length;
					let truncatedMessage = post.mesage;
					let truncated = false;
					if (messageLines > 10 || post.message.length > 1000) {
						truncatedMessage = splitPost.slice(0, 16).join('\n');
						truncated = true;
					}
				if truncated
					blockquote.post-message !{truncatedMessage}
					p Message too long. #[a(href=`/${board._id}/thread/${post.thread == null ? post.postId : post.thread}#${post.postId}`) Click here] to view the full text.
				else
					blockquote.post-message !{post.message}
			else 
				blockquote.post-message !{post.message}
	if post.reports
		each report in post.reports
			span.reports.post-container #{report}
